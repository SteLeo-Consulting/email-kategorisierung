// =============================================================================
// Internationalization (i18n) - German & English
// =============================================================================

export type Language = 'de' | 'en';

export const translations = {
  de: {
    // Common
    loading: 'Laden...',
    save: 'Speichern',
    cancel: 'Abbrechen',
    delete: 'Löschen',
    edit: 'Bearbeiten',
    create: 'Erstellen',
    add: 'Hinzufügen',
    refresh: 'Aktualisieren',
    confirm: 'Bestätigen',
    error: 'Fehler',
    success: 'Erfolg',
    active: 'Aktiv',
    inactive: 'Inaktiv',
    yes: 'Ja',
    no: 'Nein',
    close: 'Schließen',
    actions: 'Aktionen',
    settings: 'Einstellungen',
    logout: 'Abmelden',

    // Navigation
    nav: {
      dashboard: 'Dashboard',
      connections: 'Verbindungen',
      categories: 'Kategorien',
      rules: 'Regeln',
      review: 'Prüfen',
      auditLog: 'Audit Log',
      settings: 'Einstellungen',
    },

    // Dashboard
    dashboard: {
      title: 'Dashboard',
      subtitle: 'Übersicht über deine E-Mail-Kategorisierung',
      connections: 'Verbindungen',
      todayProcessed: 'Heute verarbeitet',
      total: 'insgesamt',
      categories: 'Kategorien',
      activeRules: 'aktive Regeln',
      needsReview: 'Zur Prüfung',
      reviewNow: 'Jetzt prüfen',
      categoryDistribution: 'Kategorieverteilung',
      emailDistribution: 'Verteilung der klassifizierten E-Mails',
      noEmailsClassified: 'Noch keine E-Mails klassifiziert',
      recentActivity: 'Letzte Aktivitäten',
      recentActivityDesc: 'Die letzten Aktionen im System',
      noActivity: 'Keine Aktivitäten',
      quickActions: 'Schnellaktionen',
      addConnection: 'Verbindung hinzufügen',
      createRule: 'Regel erstellen',
      reviewEmails: 'E-Mails prüfen',
      runProcessing: 'E-Mails verarbeiten',
      processingRunning: 'Verarbeite...',
      noActiveConnections: 'Keine aktiven Verbindungen',
    },

    // Connections
    connections: {
      title: 'Verbindungen',
      subtitle: 'Verwalte deine E-Mail-Provider-Verbindungen',
      activeConnections: 'Aktive Verbindungen',
      connectionsConfigured: 'Verbindung(en) konfiguriert',
      noConnections: 'Noch keine Verbindungen. Füge oben eine hinzu.',
      provider: 'Provider',
      email: 'E-Mail',
      status: 'Status',
      lastSync: 'Letzte Sync',
      never: 'Nie',
      processed: 'Verarbeitet',
      testConnection: 'Verbindung testen',
      processNow: 'Jetzt verarbeiten',
      delete: 'Löschen',
      connectGoogle: 'Mit Google verbinden',
      connectMicrosoft: 'Mit Microsoft verbinden',
      imapOther: 'IMAP (Strato, andere)',
      connect: 'Verbinden',
      configure: 'Konfigurieren',
      addImapConnection: 'IMAP-Verbindung hinzufügen',
      imapDescription: 'Gib die IMAP-Zugangsdaten ein. Für Strato sind die Standardwerte bereits eingetragen.',
      imapServer: 'IMAP Server',
      port: 'Port',
      useSSL: 'SSL/TLS verwenden',
      emailUsername: 'E-Mail / Benutzername',
      password: 'Passwort',
      appPasswordHint: 'Bei 2FA verwende ein App-spezifisches Passwort',
      connectionAdded: 'IMAP-Verbindung hinzugefügt',
      connectionFailed: 'Verbindung konnte nicht erstellt werden',
      testSuccess: 'Verbindungstest erfolgreich',
      testFailed: 'Verbindungstest fehlgeschlagen',
      processingStarted: 'Verarbeitung gestartet...',
      processingComplete: 'Verarbeitung abgeschlossen',
      emailsProcessed: 'E-Mails verarbeitet',
      labeled: 'gelabelt',
      processingFailed: 'Verarbeitung fehlgeschlagen',
      connectionDeleted: 'Verbindung gelöscht',
      confirmDelete: 'Verbindung wirklich löschen?',
      statusActive: 'Aktiv',
      statusError: 'Fehler',
      statusReauth: 'Neu anmelden',
    },

    // Categories
    categories: {
      title: 'Kategorien',
      subtitle: 'Verwalte die E-Mail-Kategorien für die Klassifizierung',
      availableCategories: 'Verfügbare Kategorien',
      categoriesUsed: 'Diese Kategorien werden zur Klassifizierung verwendet',
      category: 'Kategorie',
      code: 'Code',
      description: 'Beschreibung',
      rules: 'Regeln',
      processed: 'Verarbeitet',
      status: 'Status',
      system: 'System',
      systemCategoriesHint: 'Hinweis zu System-Kategorien',
      systemCategoriesDesc: 'Die vordefinierten System-Kategorien (INVOICE, APPOINTMENT, etc.) wurden automatisch erstellt und enthalten bereits Standardregeln. Du kannst diese Regeln anpassen oder neue hinzufügen.',
      manageRules: 'Regeln verwalten',
    },

    // Rules
    rules: {
      title: 'Klassifikationsregeln',
      subtitle: 'Regeln für die automatische E-Mail-Kategorisierung',
      newRule: 'Neue Regel',
      createRule: 'Neue Regel erstellen',
      editRule: 'Regel bearbeiten',
      editRuleDesc: 'Bearbeite die Regel',
      createRuleDesc: 'Definiere ein Muster zur automatischen Kategorisierung',
      activeRules: 'Aktive Regeln',
      rulesApplied: 'Regeln werden nach Priorität absteigend angewendet',
      noRules: 'Noch keine Regeln erstellt. Klicke auf "Neue Regel" um zu beginnen.',
      name: 'Name',
      category: 'Kategorie',
      selectCategory: 'Kategorie wählen',
      ruleName: 'Regelname',
      ruleNamePlaceholder: 'z.B. Rechnung im Betreff',
      ruleType: 'Regeltyp',
      field: 'Feld',
      allFields: 'Alle Felder',
      sender: 'Absender',
      subject: 'Betreff',
      content: 'Inhalt',
      pattern: 'Muster',
      patternDesc: 'Muster / Beschreibung',
      llmPlaceholder: 'z.B. E-Mails die eine Rechnung oder Zahlungsaufforderung enthalten',
      llmHint: 'Beschreibe in natürlicher Sprache, welche E-Mails erkannt werden sollen',
      regexPlaceholder: 'z.B. (rechnung|invoice)',
      keywordPlaceholder: 'z.B. rechnung',
      priority: 'Priorität',
      confidence: 'Konfidenz',
      caseSensitive: 'Groß-/Kleinschreibung beachten',
      ruleCreated: 'Regel erstellt',
      ruleUpdated: 'Regel aktualisiert',
      ruleDeleted: 'Regel gelöscht',
      confirmDelete: 'Regel wirklich löschen?',
    },

    // Review
    review: {
      title: 'E-Mails prüfen',
      subtitle: 'E-Mails mit niedriger Klassifizierungswahrscheinlichkeit',
      forReview: 'Zur Prüfung',
      reviewDesc: 'Bestätige oder ändere die vorgeschlagene Kategorie',
      subject: 'Betreff',
      noSubject: '(Kein Betreff)',
      sender: 'Absender',
      date: 'Datum',
      suggestion: 'Vorschlag',
      confidence: 'Konfidenz',
      newCategory: 'Neue Kategorie',
      change: 'Ändern...',
      approve: 'Genehmigen',
      saveWithCategory: 'Mit neuer Kategorie speichern',
      reject: 'Ablehnen (Label entfernen)',
      approved: 'Genehmigt',
      categoryChanged: 'Kategorie geändert',
      rejected: 'Abgelehnt',
      noEmailsToReview: 'Keine E-Mails zur Prüfung vorhanden. Gut gemacht!',
      page: 'Seite',
      of: 'von',
    },

    // Audit Log
    audit: {
      title: 'Audit Log',
      subtitle: 'Protokoll aller Systemaktivitäten',
      activities: 'Aktivitäten',
      activitiesDesc: 'Alle Aktionen im System werden hier protokolliert',
      timestamp: 'Zeitpunkt',
      action: 'Aktion',
      type: 'Typ',
      details: 'Details',
      created: 'Erstellt',
      deleted: 'Gelöscht',
      error: 'Fehler',
      completed: 'Abgeschlossen',
    },

    // Auth
    auth: {
      signIn: 'Anmelden',
      signInTitle: 'Bei EmailCat anmelden',
      signInDesc: 'Melde dich mit deinem E-Mail-Provider an',
      email: 'E-Mail-Adresse',
      emailPlaceholder: 'deine@email.de',
      password: 'Passwort',
      passwordPlaceholder: 'Dein Passwort',
      loginButton: 'Anmelden',
      loggingIn: 'Anmeldung...',
      orContinueWith: 'Oder weiter mit',
      continueWithGoogle: 'Mit Google fortfahren',
      continueWithMicrosoft: 'Mit Microsoft fortfahren',
      loginFailed: 'Anmeldung fehlgeschlagen',
      checkCredentials: 'Bitte E-Mail und Passwort überprüfen',
    },

    // Theme
    theme: {
      light: 'Hell',
      dark: 'Dunkel',
      system: 'System',
    },

    // Language
    language: {
      de: 'Deutsch',
      en: 'English',
    },
  },

  en: {
    // Common
    loading: 'Loading...',
    save: 'Save',
    cancel: 'Cancel',
    delete: 'Delete',
    edit: 'Edit',
    create: 'Create',
    add: 'Add',
    refresh: 'Refresh',
    confirm: 'Confirm',
    error: 'Error',
    success: 'Success',
    active: 'Active',
    inactive: 'Inactive',
    yes: 'Yes',
    no: 'No',
    close: 'Close',
    actions: 'Actions',
    settings: 'Settings',
    logout: 'Sign Out',

    // Navigation
    nav: {
      dashboard: 'Dashboard',
      connections: 'Connections',
      categories: 'Categories',
      rules: 'Rules',
      review: 'Review',
      auditLog: 'Audit Log',
      settings: 'Settings',
    },

    // Dashboard
    dashboard: {
      title: 'Dashboard',
      subtitle: 'Overview of your email categorization',
      connections: 'Connections',
      todayProcessed: 'Processed Today',
      total: 'total',
      categories: 'Categories',
      activeRules: 'active rules',
      needsReview: 'Needs Review',
      reviewNow: 'Review now',
      categoryDistribution: 'Category Distribution',
      emailDistribution: 'Distribution of classified emails',
      noEmailsClassified: 'No emails classified yet',
      recentActivity: 'Recent Activity',
      recentActivityDesc: 'Latest actions in the system',
      noActivity: 'No activity',
      quickActions: 'Quick Actions',
      addConnection: 'Add Connection',
      createRule: 'Create Rule',
      reviewEmails: 'Review Emails',
      runProcessing: 'Process Emails',
      processingRunning: 'Processing...',
      noActiveConnections: 'No active connections',
    },

    // Connections
    connections: {
      title: 'Connections',
      subtitle: 'Manage your email provider connections',
      activeConnections: 'Active Connections',
      connectionsConfigured: 'connection(s) configured',
      noConnections: 'No connections yet. Add one above.',
      provider: 'Provider',
      email: 'Email',
      status: 'Status',
      lastSync: 'Last Sync',
      never: 'Never',
      processed: 'Processed',
      testConnection: 'Test connection',
      processNow: 'Process now',
      delete: 'Delete',
      connectGoogle: 'Connect with Google',
      connectMicrosoft: 'Connect with Microsoft',
      imapOther: 'IMAP (Strato, other)',
      connect: 'Connect',
      configure: 'Configure',
      addImapConnection: 'Add IMAP Connection',
      imapDescription: 'Enter your IMAP credentials. Default values for Strato are pre-filled.',
      imapServer: 'IMAP Server',
      port: 'Port',
      useSSL: 'Use SSL/TLS',
      emailUsername: 'Email / Username',
      password: 'Password',
      appPasswordHint: 'For 2FA use an app-specific password',
      connectionAdded: 'IMAP connection added',
      connectionFailed: 'Could not create connection',
      testSuccess: 'Connection test successful',
      testFailed: 'Connection test failed',
      processingStarted: 'Processing started...',
      processingComplete: 'Processing complete',
      emailsProcessed: 'emails processed',
      labeled: 'labeled',
      processingFailed: 'Processing failed',
      connectionDeleted: 'Connection deleted',
      confirmDelete: 'Really delete connection?',
      statusActive: 'Active',
      statusError: 'Error',
      statusReauth: 'Re-authenticate',
    },

    // Categories
    categories: {
      title: 'Categories',
      subtitle: 'Manage email categories for classification',
      availableCategories: 'Available Categories',
      categoriesUsed: 'These categories are used for classification',
      category: 'Category',
      code: 'Code',
      description: 'Description',
      rules: 'Rules',
      processed: 'Processed',
      status: 'Status',
      system: 'System',
      systemCategoriesHint: 'About System Categories',
      systemCategoriesDesc: 'The predefined system categories (INVOICE, APPOINTMENT, etc.) were created automatically and already contain default rules. You can customize these rules or add new ones.',
      manageRules: 'Manage rules',
    },

    // Rules
    rules: {
      title: 'Classification Rules',
      subtitle: 'Rules for automatic email categorization',
      newRule: 'New Rule',
      createRule: 'Create New Rule',
      editRule: 'Edit Rule',
      editRuleDesc: 'Edit the rule',
      createRuleDesc: 'Define a pattern for automatic categorization',
      activeRules: 'Active Rules',
      rulesApplied: 'Rules are applied in descending priority order',
      noRules: 'No rules yet. Click "New Rule" to get started.',
      name: 'Name',
      category: 'Category',
      selectCategory: 'Select category',
      ruleName: 'Rule name',
      ruleNamePlaceholder: 'e.g. Invoice in subject',
      ruleType: 'Rule type',
      field: 'Field',
      allFields: 'All fields',
      sender: 'Sender',
      subject: 'Subject',
      content: 'Content',
      pattern: 'Pattern',
      patternDesc: 'Pattern / Description',
      llmPlaceholder: 'e.g. Emails containing an invoice or payment request',
      llmHint: 'Describe in natural language which emails should be detected',
      regexPlaceholder: 'e.g. (invoice|bill)',
      keywordPlaceholder: 'e.g. invoice',
      priority: 'Priority',
      confidence: 'Confidence',
      caseSensitive: 'Case sensitive',
      ruleCreated: 'Rule created',
      ruleUpdated: 'Rule updated',
      ruleDeleted: 'Rule deleted',
      confirmDelete: 'Really delete rule?',
    },

    // Review
    review: {
      title: 'Review Emails',
      subtitle: 'Emails with low classification confidence',
      forReview: 'For Review',
      reviewDesc: 'Confirm or change the suggested category',
      subject: 'Subject',
      noSubject: '(No subject)',
      sender: 'Sender',
      date: 'Date',
      suggestion: 'Suggestion',
      confidence: 'Confidence',
      newCategory: 'New Category',
      change: 'Change...',
      approve: 'Approve',
      saveWithCategory: 'Save with new category',
      reject: 'Reject (remove label)',
      approved: 'Approved',
      categoryChanged: 'Category changed',
      rejected: 'Rejected',
      noEmailsToReview: 'No emails to review. Well done!',
      page: 'Page',
      of: 'of',
    },

    // Audit Log
    audit: {
      title: 'Audit Log',
      subtitle: 'Log of all system activities',
      activities: 'Activities',
      activitiesDesc: 'All system actions are logged here',
      timestamp: 'Timestamp',
      action: 'Action',
      type: 'Type',
      details: 'Details',
      created: 'Created',
      deleted: 'Deleted',
      error: 'Error',
      completed: 'Completed',
    },

    // Auth
    auth: {
      signIn: 'Sign In',
      signInTitle: 'Sign in to EmailCat',
      signInDesc: 'Sign in with your email provider',
      email: 'Email address',
      emailPlaceholder: 'your@email.com',
      password: 'Password',
      passwordPlaceholder: 'Your password',
      loginButton: 'Sign In',
      loggingIn: 'Signing in...',
      orContinueWith: 'Or continue with',
      continueWithGoogle: 'Continue with Google',
      continueWithMicrosoft: 'Continue with Microsoft',
      loginFailed: 'Sign in failed',
      checkCredentials: 'Please check email and password',
    },

    // Theme
    theme: {
      light: 'Light',
      dark: 'Dark',
      system: 'System',
    },

    // Language
    language: {
      de: 'Deutsch',
      en: 'English',
    },
  },
} as const;

export type TranslationKey = keyof typeof translations.de;

export function getTranslation(lang: Language, key: string): string {
  const keys = key.split('.');
  let result: any = translations[lang];

  for (const k of keys) {
    if (result && typeof result === 'object' && k in result) {
      result = result[k];
    } else {
      return key;
    }
  }

  return typeof result === 'string' ? result : key;
}
